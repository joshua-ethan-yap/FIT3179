<!DOCTYPE html>
<html>

<head>
  <title>FIT3179 Assignment 2 - Joshua Yap</title>
  <!-- Import pure.css -->
  <link href="https://cdn.jsdelivr.net/npm/purecss@2.0.6/build/pure-min.css" rel="stylesheet">
  <!-- Import Poppin font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
  <!-- Import Vega & Vega-Lite -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <!-- Import vega-embed -->
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  <!-- CSS file -->
  <link rel="stylesheet" type="text/css" href="css/style.css" media="all">
</head>

<body>
  <div class="container">
    <div class="card">
      <div class="card-header">
        <h1 style="font-size: 3rem">Malaysia's Pulse of Generosity</h1>
        <h3>An analysis of organ donation pledges and blood donations across Malaysia</h3>
      </div>
      <div class="card-body">
        <p>In Malaysia, the number of people pledging their organs and participating in blood donations is closely tied
          to socio-economic factors. This data visualization explores organ donation pledges by state and
          compares median household income with blood donations from 2010 to 2023, offering insights into regional differences and
          how socio-economic factors may impact donor activity.</p>
      </div>
    </div>
    <div class="card">
      <div class="card-body">
        <p>
          This interactive map displays organ donation pledges per 10 000 population across different
          states in Malaysia in 2022. Darker regions indicate higher engagement, while lighter regions show lower
          participation. You can hover over a state to view detailed statistics.
        </p>
        <h3 class="text-center">Total Blood Donations per 10 000 Population by State in Malaysia (2006 - 2023)</h3>
        <div id="vis1" style="width: 100%; height: auto; margin: auto"></div>
        <div>
          <p>Select Year:</p>
          <input type="range" id="map-year-slider" min="2006" max="2023" step="1" value="2023">
          <span id="map-year-slider-value">2023</span>
        </div>
        <!-- <figure class="figure-caption text-right">
          Source: <a href="https://example.com/donation-data">Organ Donation Data Malaysia 2023</a>
        </figure> -->
      </div>
    </div>
    <div class="card">
      <div class="card-body">
        <p>
          This visualization illustrates the relationship between median household income and organ donation pledges per
          10,000 population across Malaysian states in 2022. The size of each bubble represents the state's population,
          providing additional context.
        </p>
        <h3 class="text-center">Median Household Income vs. Organ Donation Pledges per 10 000 population by
          state in 2022</h3>
        <div id="vis2" style="width: 100%; height: auto; margin: auto"></div>
        <div>
          <p><b>Year:</b></p>
          <input type="range" id="bubble-plot-year-slider" min="0" max="7" step="1" value="7">
          <span id="bubble-plot-year-slider-value">2022</span>
        </div>
        <p>
          W.P. Kuala Lumpur and W.P. Putrajaya exhibit high pledge rates despite their smaller populations,
          suggesting a strong culture of organ donation in these urban centers. Selangor, the most populous state, shows
          both a high pledge rate and higher household income, which may suggest a link between income levels and organ
          donation activity. In contrast, states with lower incomes, such as Kelantan and Sabah, tend to have lower
          pledge rates, indicating socioeconomic factors could influence donor participation.
        </p>
        <!-- <hr>
        <figure class="figure-caption text-left">
          Source: <a href="https://example.com/income-data">Household Income and Blood Donation Data 2022</a>
        </figure> -->
      </div>
    </div>
    <div class="card">
      <div class="card-body">
        <p>
          This visualization highlights the trends in blood donations and organ donation pledges in Malaysia from 2010
          to 2023. Blood donations steadily increased until 2019, surpassing 1 million annually in 2015. However,
          both dipped sharply during the COVID-19 pandemic, with blood donations hitting a decade low in 2021, and organ
          donation pledges
          bottoming out in 2020.
        </p>
        <h3 class="text-center">Blood Donations and Organ Donation Pledges in Malaysia (2010-2023)</h3>
        <div id="vis3" style="width: 100%; height: auto; margin: auto"></div>
        <p>
          In 2022, organ pledges surged to a record-breaking 51 772, reflecting renewed interest post-pandemic. The
          overall rise in donations can be linked to awareness campaigns and public health efforts.
        </p>
      </div>
    </div>
    <div class="card">
      <div class="card-body">
        <div id="vis4" style="width: 100%; height: auto; margin: auto"></div>
      </div>
    </div>
    <div class="card">
      <div class="card-body">
        <div id="vis5" style="width: 100%; height: auto; margin: auto"></div>
      </div>
    </div>
    <div class="card">
    <div class="card">
      <div class="card-footer text-center">
        <p><b>Joshua Yap 2024</b> | FIT3179 - Data Visualisation Assignment 2</p>
      </div>
    </div>
  </div>

  <script type="text/javascript">
    var specVis1 = "./js/blood_donations_map.json";
    var specVis2 = "./js/blood_donations_household_income_bubble.json";
    var specVis3 = "./js/organ_blood_donation_bar.json";
    var specVis4 = "./js/blood_type_line.json";
    var specVis5 = "./js/blood_donations_over_time_dot.json";

    const mapYearSlider = document.getElementById("map-year-slider");
    const mapYearSliderValue = document.getElementById("map-year-slider-value");

    const bubblePlotYears = [2007, 2009, 2012, 2014, 2016, 2019, 2020, 2022];
    const bubblePlotYearSlider = document.getElementById("bubble-plot-year-slider");
    const bubblePlotYearSliderValue = document.getElementById("bubble-plot-year-slider-value");

    vegaEmbed("#vis1", specVis1, opt = { 
      render: "svg", 
      "actions": false
    }).then((result) => {
      const view = result.view;

      mapYearSlider.addEventListener("input", function () {
        const selectedYear = +this.value;
        mapYearSliderValue.textContent = selectedYear;
        view.signal("selectedYear", selectedYear).runAsync();
      });
    }).catch(console.error);

    vegaEmbed("#vis2", specVis2, opt = { 
      render: "svg", 
      "actions": false
    }).then((result) => {
      const view = result.view;

      bubblePlotYearSlider.addEventListener("input", function () {
        const selectedYear = bubblePlotYears[this.value];
        
        bubblePlotYearSliderValue.textContent = selectedYear;
        view.signal("selectedYear", selectedYear).runAsync();
      });
    }).catch(console.error);

    vegaEmbed('#vis3', specVis3, opt = {
      renderer: "svg",
      actions: false
    }).then(function (result) {
    }).catch(console.error);

    vegaEmbed('#vis4', specVis4, opt = {
      renderer: "svg",
      actions: false
    }).then(function (result) {
    }).catch(console.error);

    vegaEmbed('#vis5', specVis5, opt = {
      renderer: "svg",
      actions: false
    }).then(function (result) {
    }).catch(console.error);
  </script>
</body>

</html>